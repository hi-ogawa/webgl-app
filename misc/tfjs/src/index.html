<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Mocha Tests</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../node_modules/mocha/mocha.css" />
</head>
<body>
  <div id="mocha"></div>
  <script src="../node_modules/chai/chai.js"></script>
  <script src="../node_modules/mocha/mocha.js"></script>
  <script src="../node_modules/lodash/lodash.js"></script>

  <script>
    const options = { ui: 'bdd', timeout: 0 }
    options.reporter = window.__HEADLESS ? 'spec' : 'html'
    mocha.setup(options)
    window.assert = chai.assert
  </script>

  <script type="module">
    import './test.js'
    mocha.run(() => {
      // Tell headless test when to exit
      window.__MOCHA_FINISHED = true
    });
  </script>
</body>
